

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>NLP &mdash; Linux for Health  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  
    <link rel="canonical" href="https://linuxforhealth.github.io/docs/routes/nlp.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developing for LinuxForHealth" href="../develop/extend.html" />
    <link rel="prev" title="FHIR TO TEXT" href="fhir-to-text.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: 0x4380B4" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Linux for Health
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer-setup.html">Developer Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/firstroute.html">Hello World</a></li>
<li class="toctree-l1"><a class="reference internal" href="../application-configuration.html">Application Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feature-configuration.html">Feature Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../message-structure.html">Message Structure</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/fhir-r4.html">FHIR R4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/hl7-v2.html">HL7-v2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/blue-button-20.html">Blue Button 2.0</a></li>
</ul>
<p class="caption"><span class="caption-text">Routes:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="fhir-r4-rest.html">FHIR R4</a></li>
<li class="toctree-l1"><a class="reference internal" href="orthanc-post.html">Orthanc DICOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="direct-storeandnotify.html">Direct Store and Notify</a></li>
<li class="toctree-l1"><a class="reference internal" href="fhir-to-text.html">FHIR TO TEXT</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NLP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#purpose">Purpose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#details">Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calling-the-route">Calling the Route</a></li>
<li class="toctree-l2"><a class="reference internal" href="#results">Results</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Develop:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop/extend.html">Developing for LinuxForHealth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/build.html">Building Your Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/test.html">Testing Your Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/property-encryption.html">Property Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/route-basics.html">Developing Routes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/configure-kong.html">Configuring Kong</a></li>
</ul>
<p class="caption"><span class="caption-text">Deployment:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deployment/container.html">Container Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/compose.html">Docker Compose Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/openshift.html">OpenShift Container Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/oci.html">Open Container Initiative (OCI)</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Linux for Health</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>NLP</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/routes/nlp.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nlp">
<h1>NLP<a class="headerlink" href="#nlp" title="Permalink to this headline">¶</a></h1>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>The LinuxForHealth (LFH) NLP route allows you to send unstructured data to an NLP REST API for analysis. The canonical NLP service response is persisted as a Kafka topic.
The NLP service employed for analysis is configurable via property settings as shown below. Basic auth is the supported authentication method. Both text/plain and application/json request content types are supported.</p>
</div>
<div class="section" id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 49%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Route Name</p></td>
<td><p>nlp</p></td>
</tr>
<tr class="row-odd"><td><p>Route URI</p></td>
<td><p>direct:nlp</p></td>
</tr>
<tr class="row-even"><td><p>Supported Operations(s)</p></td>
<td><p>Camel direct invocation</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The direct:nlp route expects the following LFH property settings:</p>
<p><strong>Exchange State</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 56%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>LFH Properties</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lfh.connect.nlp.uri</p></td>
<td><p>NLP service request endpoint.</p></td>
<td><p>Endpoint for ACD (us-east)</p></td>
</tr>
<tr class="row-odd"><td><p>lfh.connect.nlp.auth</p></td>
<td><p>Camel http component authMethod, authUsername, and authPassword settings.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>lfh.connect.nlp.dataformat</p></td>
<td><p>Data format identifier for route (output Kafka topic prefix).</p></td>
<td><p>NLP</p></td>
</tr>
<tr class="row-odd"><td><p>lfh.connect.nlp.messagetype</p></td>
<td><p>Message type identifier for route (output Kafka topic suffix).</p></td>
<td><p>RESONSE</p></td>
</tr>
<tr class="row-even"><td><p>lfh.connect.nlp.request-json</p></td>
<td><p>Json request wrapper. “&lt;REPLACE_TOKEN&gt;” is replaced by the unstructured
data at runtime. This is for nlp services that require application/json
requests. If plain text is supported, this property may be left blank.</p></td>
<td><p>ACD json request wrapper.</p></td>
</tr>
</tbody>
</table>
<p><strong>Sample Annotator for Clinical Data (ACD) properties:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>LFH Properties</p></th>
<th class="head"><p>Sample property values for ACD</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lfh.connect.nlp.uri</p></td>
<td><p><a class="reference external" href="https://us-east.wh-acd.cloud.ibm.com/wh-acd/api/v1/analyze/wh_acd.ibm">https://us-east.wh-acd.cloud.ibm.com/wh-acd/api/v1/analyze/wh_acd.ibm</a>
_clinical_insights_v1.0_standard_ flow?version=2020-10-22</p></td>
</tr>
<tr class="row-odd"><td><p>lfh.connect.nlp.auth</p></td>
<td><p>&amp;authMethod=Basic&amp;authUsername=apikey&amp;authPassword=ENC(
&lt;YOUR_ENCRYPTED_PASSWORD_HERE&gt;)</p></td>
</tr>
<tr class="row-even"><td><p>lfh.connect.nlp.dataformat</p></td>
<td><p>NLP</p></td>
</tr>
<tr class="row-odd"><td><p>lfh.connect.nlp.messagetype</p></td>
<td><p>RESPONSE</p></td>
</tr>
<tr class="row-even"><td><p>lfh.connect.nlp.request-json=</p></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Sample Google Healthcare NLP service properties:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>LFH Properties</p></th>
<th class="head"><p>Sample property values for Google NLP service</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lfh.connect.nlp.uri</p></td>
<td><p><a class="reference external" href="https://healthcare.googleapis.com/v1beta1/projects/PROJECT_ID/">https://healthcare.googleapis.com/v1beta1/projects/PROJECT_ID/</a>
locations/LOCATION/services/nlp:analyzeEntities</p></td>
</tr>
<tr class="row-odd"><td><p>lfh.connect.nlp.auth</p></td>
<td><p>&amp;authMethod=Basic&amp;authUsername=apikey&amp;authPassword=ENC(
&lt;YOUR_ENCRYPTED_PASSWORD_HERE&gt;)</p></td>
</tr>
<tr class="row-even"><td><p>lfh.connect.nlp.dataformat</p></td>
<td><p>NLP</p></td>
</tr>
<tr class="row-odd"><td><p>lfh.connect.nlp.messagetype</p></td>
<td><p>RESPONSE</p></td>
</tr>
<tr class="row-even"><td><p>lfh.connect.nlp.request-json=</p></td>
<td><p>{“nlpService”:”projects/PROJECT_ID/locations/LOCATION/services/nlp”,
“documentContent”: &lt;REPLACE_TOKEN&gt; }</p></td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> &lt;REPLACE_TOKEN&gt; is replaced at runtime by this route with the plain text body contained within the incoming camel exchange message.</p>
</div>
<div class="section" id="calling-the-route">
<h2>Calling the Route<a class="headerlink" href="#calling-the-route" title="Permalink to this headline">¶</a></h2>
<p>direct:nlp is invoked as part of a route you define when the exchange message contains unstructured data to be analyzed by an nlp service. This route invokes the direct:storeAndNotify route to persist the canonical response from an nlp service to the data store. The nlp response is wrapped in a LFH message envelope with the canonical response base64-encoded within the data element.
The <a class="reference external" href="fhir-to-text.html">FHIR to Text</a> route may optionally be enabled to automatically extract unstructured data within FHIR resources persisted in Kafka for nlp analysis via this route.</p>
</div>
<div class="section" id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>As a result of calling this route, the canonical response from an nlp service within the message body and LFH message attributes are stored in Kafka. These nlp responses can be retrieved at a later date and employed in a myriad of ways to reveal insights otherwise hidden in unstructured data.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../develop/extend.html" class="btn btn-neutral float-right" title="Developing for LinuxForHealth" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="fhir-to-text.html" class="btn btn-neutral float-left" title="FHIR TO TEXT" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, IBM

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
 
<div class="footer">
    <p>
        LinuxForHealth is sublicensed by the Linux Foundation with Sublicense ID: 20200615-0008
    </p>
</div>    


</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
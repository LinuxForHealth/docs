

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OpenShift Container Platform &mdash; Linux for Health  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  
    <link rel="canonical" href="https://linuxforhealth.github.io/docs/deployment/openshift.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Open Container Initiative (OCI)" href="oci.html" />
    <link rel="prev" title="Docker Compose Support" href="compose.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: 0x4380B4" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Linux for Health
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer-setup.html">Developer Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/firstroute.html">Hello World</a></li>
<li class="toctree-l1"><a class="reference internal" href="../application-configuration.html">Application Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feature-configuration.html">Feature Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../message-structure.html">Message Structure</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/fhir-r4.html">FHIR R4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/hl7-v2.html">HL7-v2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/blue-button-20.html">Blue Button 2.0</a></li>
</ul>
<p class="caption"><span class="caption-text">Routes:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../routes/fhir-r4-rest.html">FHIR R4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routes/orthanc-post.html">Orthanc DICOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routes/direct-storeandnotify.html">Direct Store and Notify</a></li>
</ul>
<p class="caption"><span class="caption-text">Develop:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop/extend.html">Developing for Linux for Health</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/build.html">Building Your Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/test.html">Testing Your Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/property-encryption.html">Property Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/route-basics.html">Developing Routes</a></li>
</ul>
<p class="caption"><span class="caption-text">Deployment:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="container.html">Container Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="compose.html">Docker Compose Support</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">OpenShift Container Platform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-requirements">General Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-ready-containers-setup">Code Ready Containers Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#azure-red-hat-openshift-setup">Azure Red Hat OpenShift Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lfh-openshift-quickstart">LFH OpenShift QuickStart</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="oci.html">Open Container Initiative (OCI)</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Linux for Health</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>OpenShift Container Platform</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/deployment/openshift.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="openshift-container-platform">
<h1>OpenShift Container Platform<a class="headerlink" href="#openshift-container-platform" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Linux for Health (LFH) Connect supports provisoning it’s applications and services on the OpenShift Container Platform (OCP). Additional scripts are provided to provision OCP on supported cloud platforms. The OCP provisioning scripts are “general-use” and may be adapted as needed.
Supported OCP platforms include Azure and Code Ready Containers (CRC) for local development, with additional environments coming soon!</p>
</div>
<div class="section" id="general-requirements">
<h2>General Requirements<a class="headerlink" href="#general-requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>A <a class="reference external" href="https://developers.redhat.com/register">Red Hat Developer Account</a></p></li>
<li><p>The OpenShift CLI tool. Note: this tool is provided with the Code Ready Containers (CRC) installation.</p></li>
</ul>
</div>
<div class="section" id="code-ready-containers-setup">
<h2>Code Ready Containers Setup<a class="headerlink" href="#code-ready-containers-setup" title="Permalink to this headline">¶</a></h2>
<p>First, download the latest Code Ready Containers release and “pull secret” from the Red Hat Developer Site. The “pull secret” is used to enable access to Red Hat image repositories within the CRC VM.</p>
<p>To install Code Ready Containers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># assume $HOME/Downloads contains the CRC installation and pull secret
cd $HOME/Downloads
tar -xvzf crc-macos-amd64.tar.xz
cd crc-&lt;target platform&gt;
cp crc /usr/local/bin
crc setup
crc start -p pull-secret.txt --nameserver 1.1.1.1
# wait for crc to provision
crc status
</pre></div>
</div>
<p>Following the installation add $HOME/.crc/bin to the system’s executable path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># update profile with</span>
<span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="s2">&quot;$HOME/.crc/bin/oc:$PATH&quot;</span>
</pre></div>
</div>
<p>Note on OS X, the crc executable may register as unverified. Open the “Security &amp; Privacy” pane in System Preferences.</p>
<p>To view the provided CRC credentials for the OpenShift console run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">crc</span> <span class="n">console</span> <span class="o">--</span><span class="n">credentials</span>
</pre></div>
</div>
<p>Additional CRC setup instructions are included within the doc.pdf file included with the distribution.</p>
</div>
<div class="section" id="azure-red-hat-openshift-setup">
<h2>Azure Red Hat OpenShift Setup<a class="headerlink" href="#azure-red-hat-openshift-setup" title="Permalink to this headline">¶</a></h2>
<p>Provisioning Azure Red Hat OpenShift (ARO) requires the following:</p>
<ul class="simple">
<li><p>An active Azure Account that is a member of the “User Access Admin” role within the subscription.</p></li>
<li><p>Configuration to allow “users” to create application registrations and service principals.</p></li>
<li><p>A minimum CPU quota of 40 within the desired region and subscription for the DSV3 instance types.</p></li>
<li><p>The Azure CLI tool (az).</p></li>
</ul>
<p>To create an ARO cluster:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># within the LFH connect project directory</span>
<span class="n">cd</span> <span class="n">container</span><span class="o">-</span><span class="n">support</span><span class="o">/</span><span class="n">openshift</span>
<span class="c1"># specify setup mode, subscription, resource group (new or existing), region</span>
<span class="o">./</span><span class="n">aro</span><span class="o">-</span><span class="n">quickstart</span> <span class="s2">&quot;install&quot;</span> <span class="s2">&quot;My Subscription&quot;</span> <span class="s2">&quot;lfh-rg&quot;</span> <span class="s2">&quot;eastus&quot;</span>
<span class="c1"># the provisioning process will take approximately 30 - 40 minutes, based on current workloads.</span>
</pre></div>
</div>
<p>After the ARO cluster is provisioned, fetch credential and access information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># within the LFH connect project directory</span>
<span class="n">cd</span> <span class="n">container</span><span class="o">-</span><span class="n">support</span><span class="o">/</span><span class="n">openshift</span>
<span class="c1"># specify setup mode, subscription, resource group (new or existing), region</span>
<span class="o">./</span><span class="n">aro</span><span class="o">-</span><span class="n">quickstart</span> <span class="s2">&quot;connection-info&quot;</span> <span class="s2">&quot;My Subscription&quot;</span> <span class="s2">&quot;lfh-rg&quot;</span> <span class="s2">&quot;eastus&quot;</span>
<span class="c1"># returns OpenShift console credentials and URLs for the console and api endpoints</span>
</pre></div>
</div>
<p>To remove the ARO cluster:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># within the LFH connect project directory</span>
<span class="n">cd</span> <span class="n">container</span><span class="o">-</span><span class="n">support</span><span class="o">/</span><span class="n">openshift</span>
<span class="c1"># specify setup mode, subscription, resource group (new or existing), region</span>
<span class="o">./</span><span class="n">aro</span><span class="o">-</span><span class="n">quickstart</span> <span class="s2">&quot;remove&quot;</span> <span class="s2">&quot;My Subscription&quot;</span> <span class="s2">&quot;lfh-rg&quot;</span> <span class="s2">&quot;eastus&quot;</span>
<span class="c1"># submits the delete request and provides commands to run to remove dependent objects once the cluster is deleted</span>
</pre></div>
</div>
</div>
<div class="section" id="lfh-openshift-quickstart">
<h2>LFH OpenShift QuickStart<a class="headerlink" href="#lfh-openshift-quickstart" title="Permalink to this headline">¶</a></h2>
<p>The LFH OpenShift QuickStart is compatible with any OpenShift 4.x installation. The quickstart uses the <cite>oc</cite> command line tool to manage OpenShift resources including projects, applications, services, and routes.</p>
<p>To install the LFH QuickStart:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># log into the OCP API</span>
<span class="n">oc</span> <span class="n">login</span> <span class="o">-</span><span class="n">u</span> <span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">-</span><span class="n">p</span> <span class="p">[</span><span class="n">password</span><span class="p">]</span> <span class="p">[</span><span class="n">openshift</span> <span class="n">api</span> <span class="n">url</span><span class="p">]</span>

<span class="c1"># install quickstart assets</span>
<span class="o">./</span><span class="n">lfh</span><span class="o">-</span><span class="n">quickstart</span><span class="o">.</span><span class="n">sh</span> <span class="n">install</span>

<span class="c1"># when the install is complete, use `oc` to view cluster status information</span>
<span class="n">oc</span> <span class="n">status</span>
</pre></div>
</div>
<p>To remove the LFH QuickStart:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># log into the OCP API</span>
<span class="n">oc</span> <span class="n">login</span> <span class="o">-</span><span class="n">u</span> <span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">-</span><span class="n">p</span> <span class="p">[</span><span class="n">password</span><span class="p">]</span> <span class="p">[</span><span class="n">openshift</span> <span class="n">api</span> <span class="n">url</span><span class="p">]</span>

<span class="c1"># install quickstart assets</span>
<span class="o">./</span><span class="n">lfh</span><span class="o">-</span><span class="n">quickstart</span><span class="o">.</span><span class="n">sh</span> <span class="n">remove</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="oci.html" class="btn btn-neutral float-right" title="Open Container Initiative (OCI)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="compose.html" class="btn btn-neutral float-left" title="Docker Compose Support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, IBM

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>